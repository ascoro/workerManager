/*! workerManager - v0.1.0 - 2013-07-16
* Copyright (c) 2013 Albert Serra; Licensed  */
var workerManager=function(a){a=a||{};var b=this,c=a.functions||[],d=[],e=[],f=function(a){for(var b=a.length,c="",d=0;b>d;d++){var e=a[d];c+='case "'+e.name+'":'+e.code+";break;"}return URL.createObjectURL(new window.Blob(["self.addEventListener('message', function(e) { var o = JSON.parse(e.data);var params = o.params; var result={success:true}; switch(o.name){"+c+"default:result={success:false,message:'Not implemented'};break;}; result.callbackHash=o.callbackHash;self.postMessage(JSON.stringify(result)); }, false);"]))},g=function(){return new Worker(f(c))},h=function(){var a=g();return a.addEventListener("message",function(a){i(this,JSON.parse(a.data))},!1),a.count=e.length,e.push(a),a};b.execute=function(a,b,c){var f=Math.floor(1e11*Math.random()),g={name:a,params:b,callbackHash:f,timestamp:new Date,callback:c};d[f]=g,e[0].postMessage(JSON.stringify(g))};var i=function(a,b){var c=d[b.callbackHash];b.timestamp=new Date,c.callback({result:b,call:c}),delete d[b.callbackHash]};h()};